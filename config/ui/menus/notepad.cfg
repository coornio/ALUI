
UImenu "notepad" [
    uivlist 0.01 [
        uihlist 0.01 [
            uialign -1 -2
            uifield notepadfile -35 [] 0.6 [
                uioutline (uifocus? 0xFF0000 $c_line)
                uiclamp- 1 1 1 1
            ]
            UIbutton "hold2" [ uitext "Load"       0.6 ] 0.04 0.032 [ textfocus $notepadfile ; textload $notepadfile ]
            UIbutton "hold2" [ uitext "Save"       0.6 ] 0.04 0.032 [ textfocus $notepadfile ; textsave $notepadfile ]
            UIbutton "hold2" [ uitext "Exec"       0.6 ] 0.04 0.032 [ textfocus $notepadfile ; textexec ]
            uispace 0.01 0 [ UIbar 0 1 ]
            UIbutton "hold2" [ uitext "Copy"       0.6 ] 0.04 0.032 [ textfocus $notepadfile ; textcopy ]
            UIbutton "hold2" [ uitext "Paste"      0.6 ] 0.04 0.032 [ textfocus $notepadfile ; textpaste ]
            UIbutton "hold2" [ uitext "Select All" 0.6 ] 0.04 0.032 [ textfocus $notepadfile ; textselectall ]
            uispace 0.01 0 [UIbar 0 1]
            UIbutton "hold2" [ uitext "Clear All"  0.6 ] 0.04 0.032 [ textfocus $notepadfile ; textclear ]
        ]
        uitexteditor $notepadfile -80 20 1 "" 0 [
            uioutline (uifocus? 0xFF0000 $c_line)
            uiclamp- 1 1 1 1
        ]
        textinit $notepadfile $notepadfile
    ]
] [] [] [] [ uitext "Notepad" 0.8 ]

UImenu "cmc_confirm" [
    uivlist 0.02 [
        uiclamp 1 1
        UItitle [ uitext "Copy map config:" 0.6 ] 0 0.03
        uiclamp- 1 1
        uivlist 0.01 [
            uitext (concatword "^f2" $_cmc_from) 0.6
            UItriangle 0 0.006 0.006 180
            uitext (concatword "^f2" $_cmc_to) 0.6
        ]
        uihlist 0 [
            UIbutton "hold2" [ uitext "Accept" 0.6 ] 0.18 0.032 [
                textfocus "#copymapcfg"
                textload (concatword "media/map/" $_cmc_from ".cfg")
                textsave (concatword "media/map/" $_cmc_to   ".cfg")
                hideui "cmc_confirm"
            ]
            UIbutton "hold2" [ uitext "Cancel"  0.6 ] 0.18 0.032 [ hideui "cmc_confirm" ]
        ]
    ]
] [
    if (|| [=s $_cmc_from ""] [=s $_cmc_to ""]) [ hideui "cmc_confirm" ]
] [ _cmc_from = "" ; _cmc_to = "" ]

////////////////////////////////////////////////////////////////////////////////////////////////////

notepadfile = "untitled.txt"
_cmc_from   = ""
_cmc_to     = ""

notepad = [
    if $numargs [ notepadfile = $arg1 ]
    showui "notepad"
]

mapnotepad = [
    notepadfile = (concatword "media/map/" (? $numargs $arg1 $mapname) ".cfg")
    showui "notepad"
]

copymapcfg = [
    if $numargs [
        _cmc_from = $arg1
        _cmc_to   = (? (= $numargs 2) $arg2 $mapname)
        if (findfile (concatword "media/map/" $_cmc_from ".cfg")) [
            if (findfile (concatword "media/map/" $_cmc_to ".cfg")) [ showui "cmc_confirm" ] [
                textfocus "#copymapcfg"
                textload (concatword "media/map/" $_cmc_from ".cfg")
                textsave (concatword "media/map/" $_cmc_to   ".cfg")
            ]
        ] [
            echo (concatword "^f7Map config "^f8^" $_cmc_from "^f7^" does not exist!")
            _cmc_from = "" ; _cmc_to = ""
        ]
    ]
]
