
UImenu "options" [
    uihlist 0 [
        uivlist 0 [
            looplist2 n i [
                "General"  "config"
                "Audio"    "sound"
                "Display"  "display"
                "Graphics" "graphics"
            ] [
                //uihover+ [ .UI_opttabs = $n ]
                if (=s $.UI_opttabs $n) [
                    UIbuttonarea "hold5" 0.15 0.13 [
                        uivlist $.UI_pad_L [
                            UIfastimg "ui/" $i 1 0.048 0.048
                            uitext $n 0.7
                        ]
                    ]
                ] [
                    UIbuttonarea "hold6" 0.15 0.07 [
                        uitext $n 0.7
                        uihover [ .UI_opttabs = $n ]
                    ]
                ]

            ]
        ]
        UItooltipbox 0.8 0.496 [
            UIcleartip
            uivlist 0 [
                uialign 1 -1
                uifill 0 $.UI_pad_L

                cases $.UI_opttabs "General" [
                    UIoptrow 0 [ uitext "Aim FOV" 0.6 ] 0 [
                        UIhsliderslim fov 50 150 1 0.40 0.032
                    ]
                    UIoptrow 0 [ uitext "Zoom FOV" 0.6 ] 0 [
                        UIhsliderslim zoomfov 10 90 1 0.40 0.032
                    ]
                    UIbar 1 0 0.02 0.016
                    UIoptrow 0 [ uitext "Aim Sensitivity" 0.6 ] 0 [
                        UIhsliderslim sensitivity 5 40 0.1 0.40 0.032
                    ]
                    UIoptrow 0 [ uitext "Zoom Sensitivity" 0.6 ] 0 [
                        UIhsliderslim zoomsens 1 20 0.1 0.40 0.032
                    ]
                    UIoptrow 0 [ uitext "UI Sensitivity" 0.6 ] 0 [
                        UIhsliderslim uisensitivity 0.1 4 0.1 0.40 0.032
                    ]
                    UIbar 1 0 0.02 0.016
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $zoomtoggle 0.016
                            uitext "Zoom Toggle" 0.6
                        ] 0 0.032 [ zoomtoggle (! $zoomtoggle) ] -1
                    ]
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $invmouse 0.016
                            uitext "Invert Mouse" 0.6
                        ] 0 0.032 [ invmouse (! $invmouse) ] -1
                    ]
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $showfps 0.016
                            uitext "Show FPS" 0.6
                        ] 0 0.032 [ showfps (! $showfps) ] -1
                    ]
                    UIbar 1 0 0.02 0.016
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $wallclock 0.016
                            uitext "Show Clock" 0.6
                        ] 0 0.032 [ wallclock (! $wallclock) ] -1
                    ]
                    UIoptrow 0 [ uitext "Format" 0.6 ] 2 [
                        UIbutton "hold2" [
                            UIcheckbox $wallclock24 0.016
                            uitext "24 hours" 0.6
                        ] 0.2 0.032 [ wallclock24 (! $wallclock24) ] -1
                        UIbutton "hold2" [
                            UIcheckbox $wallclocksecs 0.016
                            uitext "Seconds" 0.6
                        ] 0.2 0.032 [ wallclocksecs (! $wallclocksecs) ] -1
                    ] [! $wallclock]
                    UIbar 1 0 0.02 0.016
                    UIoptrow 0 [ uitext "Blood Effects" 0.6 ] 2 [
                        //UIbutton "hold2" [
                        //    UIcheckbox $heartbeat 0.016
                        //    uitext "Heartbeat" 0.6
                        //] 0.2 0.032 [ heartbeat (! $heartbeat) ] -1
                        UIbutton "hold2" [
                            UIcheckbox $blood 0.016
                            uitext "Splatter" 0.6
                        ] 0.2 0.032 [ blood (! $blood) ] -1
                    ]
                    UIbar 1 0 0.02 0.016
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $ragdoll 0.016
                            uitext "Ragdolls" 0.6
                        ] 0 0.032 [ ragdoll (! $ragdoll) ] -1
                    ]
                    UIoptrow 0 [ uitext "Fade Time" 0.6 ] 0 [
                        UIhsliderslim ragdollmillis 0 300000 5000 0.40 0.032 [] [concat (div $$arg1 1000) "seconds"]
                    ] [! $ragdoll]
                    UIoptrow 0 [ uitext "Velocity" 0.6 ] 0 [
                        UIhsliderslim deadpush 1 20 1 0.40 0.032 [] [concatword "x" $$arg1]
                    ] [! $ragdoll]
                    UIoptrow 0 [ uitext "Player Brightness" 0.6 ] 0 [
                        UIhsliderslim fullbrightmodels 0 200 1 0.40 0.032 [] [concatword $$arg1 "%"]
                    ]
                    UIbar 1 0 0.02 0.016
                    //UIoptrow 1 [
                    //    UIbutton "hold2" [
                    //        UIcheckbox $radartargeting 0.016
                    //        uitext "3D Targeting" 0.6
                    //    ] 0 0.032 [ radartargeting (! $radartargeting) ] -1
                    //] 2 [
                    //    UIbutton "hold2" [
                    //        UIcheckbox $persistenttargets 0.016
                    //        uitext "Persistent" 0.6
                    //    ] 0.2 0.032 [ persistenttargets (! $persistenttargets) ] -1
                    //    UIbutton "hold2" [
                    //        UIcheckbox $fcolortargets 0.016
                    //        uitext "Faction Colors" 0.6
                    //    ] 0.2 0.032 [ fcolortargets (! $fcolortargets) ] -1
                    //] [! $radartargeting]
                    UIoptrow 0 [ uitext "Radar" 0.6 ] 2 [
                        //UIbutton "hold2" [
                        //    UIcheckbox $minimapcompass 0.016
                        //    uitext "Compass" 0.6
                        //] 0.2 0.032 [ minimapcompass (! $minimapcompass) ] -1
                        UIbutton "hold2" [
                            UIcheckbox $showminimap 0.016
                            uitext "Minimap" 0.6
                        ] 0.2 0.032 [ showminimap (! $showminimap) ] -1
                    ]
                    UIbar 1 0 0.02 0.016
                    UIoptrow 0 [ uitext "Scoreboard" 0.6 ] 2 [
                        UIbutton "hold2" [
                            UIcheckbox $showkills 0.016
                            uitext "Kills" 0.6
                        ] 0.2 0.032 [ showkills (! $showkills) ] -1
                        UIbutton "hold2" [
                            UIcheckbox $showdeaths 0.016
                            uitext "Deaths" 0.6
                        ] 0.2 0.032 [ showdeaths (! $showdeaths) ] -1
                        UIbutton "hold2" [
                            UIcheckbox $showscore 0.016
                            uitext "Score" 0.6
                        ] 0.2 0.032 [ showscore (! $showscore) ] -1
                        UIbutton "hold2" [
                            UIcheckbox $showping 0.016
                            uitext "Ping" 0.6
                        ] 0.2 0.032 [ showping (! $showping) ] -1
                        UIbutton "hold2" [
                            UIcheckbox $showclientnum 0.016
                            uitext "Client#" 0.6
                        ] 0.2 0.032 [ showclientnum (! $showclientnum) ] -1
                        UIbutton "hold2" [
                            UIcheckbox $showip 0.016
                            uitext "IP:Port" 0.6
                        ] 0.2 0.032 [ showip (! $showip) ] -1
                        UIbutton "hold2" [
                            UIcheckbox $showspectators 0.016
                            uitext "Spectators" 0.6
                        ] 0.2 0.032 [ showspectators (! $showspectators) ] -1
                        UIbutton "hold2" [
                            UIcheckbox $sbopaque 0.016
                            uitext "Opaque" 0.6
                        ] 0.2 0.032 [ sbopaque (! $sbopaque) ] -1
                    ]
                ] "Audio" [
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $sound 0.016
                            uitext "Enable Sound" 0.6
                        ] 0 0.032 [ sound (! $sound) ] -1 [ uiclamp 1 1 ]
                    ]
                    //UIoptrow 0 [ uitext "Master Volume" 0.6 ] 1 [
                    //    UIhbarslider mastervol 0 255 15 0.4 0.032 [ .mastervol = $mastervol ]
                    //] [! $sound]
                    UIoptrow 0 [ uitext "Sound Volume" 0.6 ] 1 [
                        UIhbarslider soundvol 0 255 15 0.4 0.032 [ .soundvol = $soundvol ]

                    ] [! $sound]
                    UIoptrow 0 [ uitext "Music Volume" 0.6 ] 1 [
                        UIhbarslider musicvol 0 255 15 0.4 0.032 [ .musicvol = $musicvol ]
                    ] [! $sound]
                    //UIbar 1 0 0.04 0.016
                    //UIoptrow 0 [ uitext "Mapsound Scale" 0.6 ] 0 [
                    //    UIhsliderslim soundenvscale 0 2 0.1 0.4 0.032 [ .soundenvscale = $soundenvscale ] [ concatword (abs (*f $$arg1 100)) "%" ]
                    //] [! $sound]
                    //UIoptrow 0 [ uitext "Events Scale" 0.6 ] 0 [
                    //    UIhsliderslim soundevtscale 0 2 0.1 0.4 0.032 [ .soundevtscale = $soundevtscale ] [ concatword (abs (*f $$arg1 100)) "%" ]
                    //] [! $sound]
                    UIbar 1 0 0.04 0.016
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $hitsound 0.016
                            uitext "Hit Confirmation" 0.6
                        ] 0 0.032 [ hitsound (! $hitsound) ] -1
                    ] 0 [] [! $sound] "Play a ping sound to confirm successful shots"
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $mumble 0.016
                            uitext "Mumble Positional Audio" 0.6
                        ] 0 0.032 [ mumble (! $mumble) ] -1
                    ] 0 [] 0 "Adjust volume and direction of voices based on player position"
                ] "Display" [
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $fullscreen 0.016
                            uitext "Exclusive Fullscreen" 0.6
                        ] 0 0.032 [ fullscreen (! $fullscreen) ] -1
                    ]
                    if $fullscreen [
                        UIoptrow 0 [ uitext "Render Width" 0.6 ] 0 [
                            UIhsliderslim screenw (* $.UI_aspectX 60) $desktopw (* $.UI_aspectX 4) 0.4 0.032
                        ]
                        UIoptrow 0 [ uitext "Render Height" 0.6 ] 0 [
                            UIhsliderslim screenh (* $.UI_aspectY 60) $desktoph (* $.UI_aspectY 4) 0.4 0.032
                        ]
                    ] [
                        UIoptrow 0 [ uitext "Window Width" 0.6 ] 0 [
                            UIhsliderslim screenw 1024 $desktopw 8 0.4 0.032
                        ]
                        UIoptrow 0 [ uitext "Window Height" 0.6 ] 0 [
                            UIhsliderslim screenh 768 $desktoph 8 0.4 0.032
                        ]
                    ]
                    UIbar 1 0 0.04 0.016
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $vsync 0.016
                            uitext "Vertical Sync" 0.6
                        ] 0.178 0.032 [ vsync (! $vsync) ] -1
                    ]
                    UIoptrow 0 [ uitext "Framerate Cap" 0.6 ] 0 [
                        UIhsliderslim maxfps 24 480 12 0.4 0.032 []
                    ]
                    UIbar 1 0 0.04 0.016
                    UIoptrow 0 [ uitext "Gamma Correction" 0.6 ] 0 [
                        UIhsliderslim gamma 30 300 1 0.4 0.032 [] [concatword $$arg1 "%"]
                    ]
                ] "Graphics" [
                    UIoptrow 0 [ uitext "Shadow Resolution" 0.6 ] 0 [
                        UIlistslider smsize = [10 "^f4lowest" 11 "^f1low" 12 "^f0medium" 13 "^f2high" 14 "^f3ultra"] 0.4 0.032
                    ]
                    UIoptrow 0 [ uitext "Shadow Filtering" 0.6 ] 0 [
                        UIlistslider smfilter = [0 "^f1low" 1 "^f0medium" 2 "^f2high" 3 "^f3ultra"] 0.4 0.032
                    ]
                    UIoptrow 0 [ uitext "Anisotropic Filtering" 0.6 ] 0 [
                        UIlistslider aniso = [0 "^f4off" 2 "^f12x" 4 "^f14x" 8 "^f18x" 16 "^f116x"] 0.4 0.032
                    ]
                    UIbar 1 0 0.04 0.016
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $gi 0.016
                            uitext "Global Illumination" 0.6
                        ] 0 0.032 [ gi (! $gi) ] -1
                    ] 0 [
                        UIlistslider rhtaps = [
                            12 @(concatword (? $gi "^f1" "^f4") "low")
                            20 @(concatword (? $gi "^f0" "^f4") "medium")
                            32 @(concatword (? $gi "^f2" "^f4") "high")
                        ] 0.4 0.032
                    ]
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $ao 0.016
                            uitext "SSAO" 0.6
                        ] 0 0.032 [ ao (! $ao) ] -1
                    ] 0 [
                        UIlistslider aotaps = [
                            5  @(concatword (? $ao "^f1" "^f4") "low")
                            8  @(concatword (? $ao "^f0" "^f4") "medium")
                            12 @(concatword (? $ao "^f2" "^f4") "high")
                        ] 0.4 0.032 [ aobilateral (? (>= $aotaps 8) 4 3) ]
                    ]
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $volumetric 0.016
                            uitext "Volumetric Lighting" 0.6
                        ] 0 0.032 [ volumetric (! $volumetric) ] -1
                    ] 0 [
                        UIlistslider volsteps = [
                            12 @(concatword (? $volumetric "^f1" "^f4") "low")
                            16 @(concatword (? $volumetric "^f0" "^f4") "medium")
                            24 @(concatword (? $volumetric "^f2" "^f4") "high")
                        ] 0.4 0.032 [ volbilateral (? (>= $volsteps 16) 2 1) ]
                    ]
                    UIbar 1 0 0.04 0.016
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $stains 0.016
                            uitext "Stains" 0.6
                        ] 0 0.032 [ stains (! $stains) ] -1
                    ]
                    UIoptrow 0 [ uitext "Fade Distance" 0.6 ] 0 [
                        UIhsliderslim maxstaindistance 256 8192 256 0.4 0.032 [] [concat $$arg1 "units"]
                    ] [! $stains ]
                    UIoptrow 0 [ uitext "Fade Time" 0.6 ] 0 [
                        UIhsliderslim stainfade 2 60 1 0.4 0.032 [ maxstaintris (? (> $stainfade 15) 8192 2048) ] [concat $$arg1 "seconds"]
                    ] [! $stains ]
                    UIbar 1 0 0.04 0.016
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $grass 0.016
                            uitext "3D Grass" 0.6
                        ] 0 0.032 [ grass (! $grass) ] -1
                    ]
                    UIoptrow 0 [ uitext "Fade Distance" 0.6 ] 0 [
                        UIhsliderslim grassdist 128 1024 32 0.4 0.032 [] [concat $$arg1 "units"]
                    ] [! $grass ]
                    UIoptrow 0 [ uitext "Blade Density" 0.6 ] 0 [
                        UIhsliderslim grassstep 0.5 8.0 0.1 0.4 0.032 [] [concat $$arg1 "per unit"]
                    ] [! $grass ]
                    UIbar 1 0 0.04 0.016
                    UIoptrow 0 [ uitext "Water Quality" 0.6 ] 2 [
                        UIbutton "hold2" [
                            UIcheckbox $waterreflect 0.016
                            uitext "Reflection" 0.6
                        ] 0.2 0.032 [ waterreflect (! $waterreflect) ] -1
                        UIbutton "hold2" [
                            UIcheckbox $vertwater 0.016
                            uitext "Animation" 0.6
                        ] 0.2 0.032 [ vertwater (! $vertwater) ] -1
                    ]
                    UIbar 1 0 0.04 0.016
                    //UIoptrow 1 [
                    //    UIbutton "hold2" [
                    //        UIcheckbox $softparticles 0.016
                    //        uitext "Soft Particles" 0.6
                    //    ] 0 0.032 [ softparticles (! $softparticles) ] -1
                    //]
                    //UIbar 1 0 0.04 0.016
                    UIoptrow 0 [ uitext "Multisample AA" 0.6 ] 0 [
                        UIlistslider msaa = [0 "^f4off" 2 "^f12x" 4 "^f04x" 8 "^f28x" 16 "^f316x"] 0.4 0.032
                    ]
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $fxaa 0.016
                            uitext "FXAA" 0.6
                        ] 0 0.032 [ fxaa (! $fxaa) ] -1
                    ] 0 [
                        UIlistslider fxaaquality = [
                            0 @(concatword (? $fxaa "^f1" "^f4") "low")
                            1 @(concatword (? $fxaa "^f0" "^f4") "medium")
                            2 @(concatword (? $fxaa "^f2" "^f4") "high")
                            3 @(concatword (? $fxaa "^f3" "^f4") "ultra")
                        ] 0.4 0.032
                    ]
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $smaa 0.016
                            uitext "Morphological AA" 0.6
                        ] 0 0.032 [ smaa (! $smaa) ] -1
                    ] 0 [
                        UIlistslider smaaquality = [
                            0 @(concatword (? $smaa "^f1" "^f4") "low")
                            1 @(concatword (? $smaa "^f0" "^f4") "medium")
                            2 @(concatword (? $smaa "^f2" "^f4") "high")
                            3 @(concatword (? $smaa "^f3" "^f4") "ultra")
                        ] 0.4 0.032 [ smaacoloredge (>= $smaaquality 3) ]
                    ]
                    UIoptrow 1 [
                        UIbutton "hold2" [
                            UIcheckbox $tqaa 0.016
                            uitext "Temporal AA" 0.6
                        ] 0.178 0.032 [ tqaa (! $tqaa) ] -1
                    ]
                ]
                uifill 0 $.UI_pad_L
            ]
        ] 0 [
            if $pendingchanges [
                diagline
                uitextfill 8.5 0.5 [
                    uitext (format "^fc%1 ^fuchange%2 pending" $pendingchanges (? (!= $pendingchanges 1) "s")) 0.5
                    uialign- 1
                ]
            ]
        ]
    ]
] [
    .UI_opttabs = "General"
    calcratio .UI_aspectX $desktopw .UI_aspectY $desktoph
] [ if $pendingchanges [ showui "dialog_changes" ] ] [] [ uitext "Options" 0.8 ]

// =================================================================================================================================== \\

UIoptrow = [
    UIbox (? (arg5) "box 0x20601808 n bg1 n" "none") 0 0 [
        uialign -1
        uihlist 0.02 [
            if $arg1 [] [ uifill 0.016 0 ]
            uifill (? $arg1 0.37 0.334) 0 [
                arg2
                uiclamp* 1 1
            ]
            if $arg3 [ uigrid $arg3 0 0 $arg4 ] arg4
        ]
        UIsettip $arg6
    ]
]