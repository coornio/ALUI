
UIquickdialog "dialog_changes" [
    UIbox "" 0.31 0 [ uiclamp 0 0 1 1 ]
] [
    uihlist 0 [
        uivlist 0 [
            uialign -2 -1
            uifill 0 0.015
            UIbuttonarea "" 0.05 0.05 [
                local s ; s = (uihold? 0.04 (uihover? 0.044 0.04))
                UIfastimg "ui/" "yes" "" $s $s
                uirelease [ hideui $uiname ; applychanges ]
            ]
        ]
        uivlist 0.01 [
            uiclamp 1 1
            uitext "Apply changes now?" 0.7
            UIbar 1
            uispace 0.01 0 [
                uifill 0.24
                uivlist 0.01 [
                    loop i $pendingchanges [
                        uifill 0 0.032 [
                            uihlist 0.01 [
                                uialign -1
                                UIradio 1 0.012
                                uitext (pendingchanges $i) 0.55
                            ]
                        ]
                    ]
                    uiclamp* 1 1
                ]
            ]
        ]
        uivlist 0 [
            uialign -2 -1
            uifill 0 0.015
            UIbuttonarea "" 0.05 0.05 [
                local s ; s = (uihold? 0.04 (uihover? 0.044 0.04))
                UIfastimg "ui/" "no" "" $s $s
                uirelease [ hideui $uiname ]
            ]
        ]
    ]
] [ if (! $pendingchanges) [ hideui $uiname ] ]




UIquickdialog "dialog_quit" [
    UIbox "" 0.27 0 [ uiclamp 0 0 1 1 ]
] [
    uihlist 0 [
        UIbuttonarea "" 0.05 0.05 [
            local s ; s = (uihold? 0.04 (uihover? 0.044 0.04))
            UIfastimg "ui/" "yes" "" $s $s
            uirelease [ quit ]
        ]
        uivlist 0.01 [
            uiclamp 1 1
            uitext "Quit to desktop?" 0.7
            UIbar 1
            uispace 0.01 0 [
                UIbutton "hold2" [
                    UIcheckbox (! $confirmquit) 0.016
                    uitext "Don't ask again" 0.55
                ] 0.2 0.032 [ confirmquit (! $confirmquit) ] -1
            ]
        ]
        UIbuttonarea "" 0.05 0.05 [
            local s ; s = (uihold? 0.04 (uihover? 0.044 0.04))
            UIfastimg "ui/" "no" "" $s $s
            uirelease [ hideui $uiname ]
        ]
    ]
]




UIquickdialog "dialog_loadmap" [
    UIbox "" 0.39 0 [ uiclamp 0 0 1 1 ]
] [
    uihlist 0 [
        uivlist 0 [
            uialign -2 -1
            uifill 0 0.015
            UIbuttonarea "" 0.05 0.05 [
                local s ; s = (uihold? 0.04 (uihover? 0.044 0.04))
                UIfastimg "ui/" "yes" "" $s $s
                uirelease [
                    map $.selectedmap
                    hideui $uiname
                    hideui "map_browser"
                ]
            ]
        ]
        uivlist 0.01 [
            uiclamp 1 1
            uitext "Change game mode?" 0.7
            UIbar 1
            uispace 0.01 0 [
                uigrid 3 0 0 [
                    looplist2 n i [
                        "Edit"  0 "rDM"  1 "pDM"  2
                        ""     -1 "rTDM" 3 "pTDM" 4
                        ""     -1 "rCTF" 5 "pCTF" 6
                    ] [
                        if (< $i 0) uifill [
                            UIbutton "hold2" [
                                UIradio [= $getnextmode $i] 0.016
                                uitext $n 0.6
                            ] 0.1 0.03 [ mode $i ] -1
                        ]
                    ]
                ]
            ]
        ]
        uivlist 0 [
            uialign -2 -1
            uifill 0 0.015
            UIbuttonarea "" 0.05 0.05 [
                local s ; s = (uihold? 0.04 (uihover? 0.044 0.04))
                UIfastimg "ui/" "no" "" $s $s
                uirelease [ hideui $uiname ]
            ]
        ]
    ]
] [ mode $getmode ]




UIquickdialog "dialog_savemap" [
    UIbox "" 0.551 0 [ uiclamp 0 0 1 1 ]
] [
    uihlist 0 [
        UIbuttonarea "" 0.05 0.05 [
            local s ; s = (uihold? 0.04 (uihover? 0.044 0.04))
            UIfastimg "ui/" "yes" "" $s $s
            uirelease [ savemap $.selectedmapname ]
        ]
        uivlist 0.01 [
            uiclamp 1 1
            uitext "Please enter your new map name:" 0.7
            UIbar 1
            uispace 0.01 0 [
                UIbasicfield .selectedmapname 32 [] 0.7
            ]
        ]
        UIbuttonarea "" 0.05 0.05 [
            local s ; s = (uihold? 0.04 (uihover? 0.044 0.04))
            UIfastimg "ui/" "no" "" $s $s
            uirelease [ hideui $uiname ]
        ]
    ]
] [ .selectedmapname = "" ]
