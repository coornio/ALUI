
UImenu "cci" [
    if $mainmenu [ hideui "cci" ] [
        cp_updateselected (listclients 1)
        cp_updatestats
    ]
    uihlist 0.01 [
        uivlist 0.01 [
            uialign -2 -1
            UIbutton "hold2" [
                UIcheckbox $cp_showspec 0.016
                uitext "Show Spec" 0.6
            ] 0.16 0.032 [
                cp_showspec = (! $cp_showspec)
                cp_selected = (listfilter i $cp_selected [! (isspectator $i)])
                cp_specfill = (? $cp_showspec 0.576 0.384)
            ] -1
            UIbutton "hold2" [
                UIcheckbox $cp_showbots 0.016
                uitext "Show Bots" 0.6
            ] 0.16 0.032 [
                cp_showbots = (! $cp_showbots)
                cp_selected = (listfilter i $cp_selected [! (isai $i)])
            ] -1
            UIbutton "hold2" [
                UIcheckbox $cp_showself 0.016
                uitext "Show Self" 0.6
            ] 0.16 0.032 [
                cp_showself = (! $cp_showself)
                cp_selected = (listdel $cp_selected $getclientnum)
            ] -1
        ]
        UIbar 0 1 // ------------------------------------------------ BUTTONS
        uivlist 0.01 [
            uihlist 0.01 [
                uialign -1 -2
                UIbutton "" [
                    uitext "Kick" 0.6
                ] 0.16 0.032 [
                    cp_selected = (listfilter i $cp_selected [&& [! (isai $i)] [!= $i $getclientnum]])
                    cp_selected_kick = $cp_selected
                    // incomplete
                ]
            ]
            UIbar 1 // ------------------------------------------------ CLIENT PANELS
            if (m_teammode $getmode) [ // TEAM TEAM TEAM TEAM TEAM
                uihlist 0.01 [
                    uivlist 0 [

                        uispace 0 0.01 [
                            uiclamp 1 1
                            UIbar 1
                        ]

                    ]
                    UIbar 0 1
                    uivlist 0 [

                        uispace 0 0.01 [
                            uiclamp 1 1
                            UIbar 1
                        ]

                    ]
                ]
            ] [ // SOLO SOLO SOLO SOLO SOLO SOLO SOLO SOLO SOLO
                uihlist 0.01 [
                    uifill (+f $cp_w 0.032) $cp_th [
                        uihlist 0.01 [
                            if $cp_stat_play [
                                uialign 1
                                if (> $cp_stat_play $cp_t) [
                                    UIvscroll 0.022 $cp_th (*f $cp_th 2)
                                    uialign- -1
                                ]
                                UIbox "box n d n" $cp_w $cp_th [
                                    uiscroll $cp_w $cp_th [ cp_clientboard 0 0 ]
                                    uialign- -2 -1
                                ]
                            ]
                        ]
                    ]
                    uifill (+f $cp_w 0.032) $cp_th [
                        uihlist 0.01 [
                            if $cp_stat_spec [
                                uialign -1
                                UIbox "box n d n" $cp_w $cp_th [
                                    uiscroll $cp_w $cp_th [ cp_clientboard 0 1 ]
                                    uialign- -2 -1
                                ]
                                if (> $cp_stat_spec $cp_t) [
                                    UIvscroll 0.022 $cp_th (*f $cp_th 2)
                                    uialign- 1
                                ]
                            ]
                        ]
                    ]
                ]
            ]
        ]
    ]
] [] [] [] [ uitext "Client Control Interface" 0.8 ]

////////////////////////////////////////////////////////////////////////////////////////////////////

cp_h = 0.044
cp_w = 0.400
cp_t = 10
cp_th = (*f $cp_h $cp_t)
cp_selected  = ""
cp_showbots  = 1
cp_showself  = 1
cp_showspec  = 1

// cp_clientboard TEAM(0 1 2) SPEC(0 1)
cp_clientboard = [
    uivlist 0 [
        uialign -2 -1
        looplist cn (
            listfilter i (listclients $cp_showself) [
                && [
                    if $arg2 [isspectator $i] [! (isspectator $i)]
                ] [
                    case $arg1 1 [= (getclientteam $i) 1] 2 [= (getclientteam $i) 2] () 1
                ] [
                    if $cp_showbots [result 1] [! (isai $i)]
                ]
            ]
        ) [ cp_client_left $cn ]
    ]
]



cp_client_left = [
    UIbuttonarea "hold2" $cp_w $cp_h [
        uirelease [
            if (< (indexof $cp_selected $arg1) 0) [
                cp_selected = (concat $cp_selected $arg1)
            ] [ cp_selected = (listdel $cp_selected $arg1) ]
        ]
        uispace 0.01 0 [
            uiclamp 1 1 1 1
            uivlist 0.006 [
                uiclamp 1 1
                uihlist 0 [
                    uiclamp 1 1
                    uicolortext (getclientcolorname $arg1) (scoreboardstatus $arg1) 0.55
                    if $showclientnum [
                        if (isai $arg1) [
                            uitext (concatword (? $n "^f8" "^f4") "BOT") 0.55
                        ] [
                            uitext (concatword (? $n "^f8") $arg1) 0.55
                            uialign- 1
                        ]
                    ]
                ]
                uihlist 0.01 [
                    
                ]
            ]
        ]
    ]

]






cp_updateselected = [ cp_selected = (listintersect $cp_selected $arg1) ]

cp_updatestats = [
    looplist i "spec play azul rojo" [ [cp_stat_@i] = 0 ]
    looplist cn (listclients 1) [
        if (isspectator $cn) [
            cp_stat_spec = (+ $cp_stat_spec 1)
        ] [
            cp_stat_play = (+ $cp_stat_play 1)
            case (getclientteam $cn) 1 [
                cp_stat_azul = (+ $cp_stat_azul 1)
            ] 2 [ cp_stat_rojo = (+ $cp_stat_rojo 1) ]
        ]
    ]
]
